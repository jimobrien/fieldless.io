/*! fieldless 19-04-2014 */
function isEmpty(a){return angular.isUndefined(a)||""===a||null===a||a!==a}(function(a){a.fieldless=angular.module("fieldless",["ngRoute","ui.bootstrap","xeditable","hljs"]),a.fieldless.run(function(a){a.theme="bs3"}),a.fieldless.config(["$routeProvider","hljsServiceProvider",function(a,b){a.when("/",{title:" Fieldless - Create Salesforce objects faster! ",templateUrl:"views/main.tpl.html",controller:"main"}).otherwise("/"),b.setOptions({tabReplace:"    "})}])}).apply(this,"undefined"!=typeof document?[window]:[]),function(a){a.controller("main",["$scope","FormServ","FieldFactory","FieldServ",function(a,b,c,d){a.field={},a.fields=[],a.fieldXML=[],a.formFields=b.fields,a.toggleFields=function(b){if("type"===b){var c=a.field.type.toLowerCase();d.toggleVisibility(a.formFields,c),d.setFieldValidation(c,a.formFields),d.setFieldDefaults(a.field)}},a.$watch("field.type",function(b){b&&(a.field=d.setFieldDefaults(a.field))}),a.$watch("fields",function(b,c){b.length>0&&c.length>0&&b.length===c.length&&(a.fieldXML=d.refreshFieldXML(b,c))},!0),a.create=function(){var e=a.field.type.split(" ").join("");a.field.xml=c.create(e,a.field).xml(),a.fields.push(a.field),a.fieldXML=d.flattenXML(a.fields),a.field={},a.fieldForm&&a.fieldForm.$setPristine(),b.toggleVisibility("hide")},a.remove=function(b){a.fields.splice(b,1),a.fieldXML=d.flattenXML(a.fields)},a.setValidation=function(){},a.selectAll=function(a){function b(){document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges()}var c;b(),document.selection?(c=document.body.createTextRange(),c.moveToElementText(document.getElementById(a)),c.select()):window.getSelection&&(c=document.createRange(),c.selectNode(document.getElementById(a)),window.getSelection().addRange(c))}}])}(window.fieldless),function(a){a.directive("ngMax",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){a.$watch(c.ngMax,function(){d.$setViewValue(d.$viewValue)});var e=function(b){var e=a.$eval(c.ngMax)||1/0;return!isEmpty(b)&&b>e?void d.$setValidity("ngMax",!1):(d.$setValidity("ngMax",!0),b)};d.$parsers.push(e),d.$formatters.push(e)}}})}(window.fieldless),function(a){a.directive("ngMin",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){a.$watch(c.ngMin,function(){d.$setViewValue(d.$viewValue)});var e=function(b){var e=a.$eval(c.ngMin)||0;return!isEmpty(b)&&e>b?void d.$setValidity("ngMin",!1):(d.$setValidity("ngMin",!0),b)};d.$parsers.push(e),d.$formatters.push(e)}}})}(window.fieldless),function(a){a.factory("FieldFactory",["TagFactory",function(a){function b(){}var c=0;return b.prototype.xml=function(){var a=[],b=["<fields>\r\n",null,"</fields>"];for(var c in this)this.propertyIsEnumerable(c)&&a.push(this[c].join("")+"\r\n");return b[1]="	"+a.join("	").replace(/,/g,""),b.join("")},b.create=function(c,d){var e,f=c;return"function"!=typeof b[f]?e=new b(d):("function"!=typeof b[f].prototype.xml&&(b[f].prototype=new b),e=new b[f](d)),d&&d.name&&(e.label=a.generate("Label",d.name),e.fullName=a.generate("FullName",d.name)),d.required&&(e.isRequired=a.generate("Required",d.required)),d.description&&(e.description=a.generate("Description",d.description)),e.type||(e.type=a.generate("Type",c)),e},b.Text=function(b){this.len=a.generate("Length",b.length)},b.Url=function(b){this.defaultVal=a.generate("DefaultValue",b.defaultValue)},b.Formula=function(b){this.formula=a.generate("Formula",b.formula),this.type=a.generate("Type",b.dataType),"Number"===b.dataType?(this.precision=a.generate("Precision",18),this.scale=a.generate("Scale",2)):"Currency"===b.dataType&&(this.precision=a.generate("Precision",18),this.scale=a.generate("Scale",2))},b.Picklist=function(b){this.picklistValues=a.generate("PicklistValues",b.picklistValues)},b.MultiselectPicklist=function(b){this.picklistValues=a.generate("PicklistValues",b.picklistValues),this.visLines=a.generate("VisibleLines",b.visibleLines)},b.RichTextArea=function(b){this.type=a.generate("Type","Html"),this.visLines=a.generate("VisibleLines",b.visibleLines),this.len=a.generate("Length",b.length)},b.LongTextArea=b.RichTextArea,b.Lookup=function(b){this.relName=a.generate("RelName",b.sfobject),this.relLabel=a.generate("RelLabel",b.sfobject),this.refTo=a.generate("RefTo",b.lookupObject)},b.Number=function(){this.precision=a.generate("Precision",18),this.scale=a.generate("Scale",2)},b.Currency=function(){this.precision=a.generate("Precision",18),this.scale=a.generate("Scale",2)},b.MasterDetail=function(b){this.relName=a.generate("RelName",b.sfobject),this.relLabel=a.generate("RelLabel",b.sfobject),this.refTo=a.generate("RefTo",b.lookupObject),this.relOrder=a.generate("RelOrder",c),this.mastRead=a.generate("MastRead",b.mastRead||!1),c++},b.Percent=b.Number,b.Currency=b.Number,b}])}(window.fieldless),function(a){a.factory("TagFactory",[function(){function a(a,b){throw{name:"Error",message:"Error: "+a+" "+b}}var b=this;return b.generate=function(c,d){var e,f=c;return"function"!=typeof b[f]?a():e=new b[f](d),e},b.Type=function(a){return["<type>",a,"</type>"]},b.Label=function(a){return["<label>",a,"</label>"]},b.FullName=function(b){var c;return b?(c=b.split(" ").join("_")+"__c",["<fullName>",c,"</fullName>"]):void a({},b)},b.Length=function(a){return["<length>",a,"</length>"]},b.VisibleLines=function(a){return["<visibleLines>",a,"</visibleLines>"]},b.RelLabel=function(a){return["<relationshipLabel>",a,"</relationshipLabel>"]},b.RelName=function(a){return["<relationshipName>",a,"</relationshipName>"]},b.RefTo=function(a){return["<referenceTo>",a,"</referenceTo>"]},b.RelOrder=function(a){return["<relationshipOrder>",a,"</relationshipOrder>"]},b.MastRead=function(a){return["<writeRequiresMasterRead>",a||!1,"</writeRequiresMasterRead>"]},b.Formula=function(a){var b=a.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;");return["<formula>",b,"</formula>"]},b.Precision=function(a){return["<precision>",a,"</precision>"]},b.Scale=function(a){return["<scale>",a,"</scale>"]},b.PicklistValues=function(a){for(var c,d,e,f=a.split("\n"),g=[],h=0;h<f.length;h++)f[h].indexOf("*")>-1?(c=b.ValName(f[h].split("*").join("")),d=b.DefaultPicklistVal(!0)):(c=b.ValName(f[h]),d=b.DefaultPicklistVal(!1)),e="		<picklistValues>\r\n	"+c.join("")+"	"+d.join("")+"		</picklistValues>\r\n",g.push(e);return["<picklist>\r\n",g,"	</picklist>"]},b.DefaultPicklistVal=function(a){return["		<default>",a||!1,"</default>\r\n"]},b.Description=function(a){return["<description>",a||!1,"</description>"]},b.ValName=function(a){return["		<fullName>",a,"</fullName>\r\n"]},b.ExternalId=function(a){return["<externalId>",a||!1,"</externalId>"]},b.DefaultValue=function(a){return["<defaultValue>",a||!1,"</defaultValue>"]},b.Required=function(a){return["<required>",a||!1,"</required>"]},b}])}(window.fieldless),function(a){a.service("FieldServ",["FieldFactory",function(a){var b=this;b.toggleVisibility=function(a,b){function c(a){return a.toLowerCase()}var d,e,f=a,g=b;for(e in f)"always"!==f[e].show&&(f[e].showFor?d=f[e].showFor instanceof Array?f[e].showFor.map(c).indexOf(g)>-1?!0:!1:f[e].showFor.toLowerCase().indexOf(g.toLowerCase())>-1:f[e].showForExcept&&(d=f[e].showForExcept instanceof Array?f[e].showForExcept.map(c).indexOf(g)<0?!0:!1:f[e].showFor.toLowerCase().indexOf(g.toLowerCase())<0),f[e].show=d?!0:!1);return a},b.setFieldDefaults=function(a){return a.type.indexOf("Text")>-1?a.type.indexOf("Area")>-1?(a.length=32768,a.visibleLines=10):a.length=255:"Number"===a.type?a.precision=18:"MultiselectPicklist"===a.type&&(a.visibleLines=5),a},b.setFieldValidation=function(a,b){function c(a){var b,c,d,e;if(a.validations.length>0)for(e=a.validations.length,d=a.formFields.length,b=0;e>b;b++)for(c=0;d>c;c+=1)a.validations[b].name.toLowerCase()===a.formFields[c].name.toLowerCase()&&(a.formFields[c].validation=a.validations[b].rules)}var d={visibleLines:{name:"visibleLines"},flength:{name:"length"}},e={formFields:b||[],validations:[]};"string"==typeof a&&(a.indexOf("Area")>-1?(d.visibleLines.rules={min:10,max:1e3},d.flength.rules={min:1,max:32768},e.validations.push(d.visibleLines,d.flength)):"Text"===a?(d.flength.rules={min:1,max:255},e.validations.push(d.flength)):"MultiselectPicklist"===a&&(d.visibleLines.rules={min:1,max:1e3}),c(e))},b.refreshFieldXML=function(c,d){for(var e,f=0;f<c.length;f++)c[f].name!==d[f].name&&(c[f].xml=a.create(c[f].type,c[f]).xml());return e=b.flattenXML(c)},b.flattenXML=function(a){var b;return b=$.map(a,function(a){return a.xml}).join("\r\n")}}])}(window.fieldless),function(a){a.service("FormServ",[function(){var a=this;a.toggleVisibility=function(b){function c(b){var c;for(c in a.fields)"always"!==a.fields[c].show&&(a.fields[c].show="show"===b?!0:"hide"===b?!1:!a.fields[c].show)}b=b?b.toLowerCase():!1,b?c(b):c()},a.fields=[{name:"name",label:"Name",type:"text",show:"always",placeholder:"Your field name"},{name:"type",label:"Type",type:"select",show:"always",selectType:"text",selectOptions:[{name:"Text",value:"Text"},{name:"Text Area",value:"TextArea"},{name:"Long Text Area",value:"LongTextArea"},{name:"Rich Text Area",value:"RichTextArea"},{name:"Formula",value:"Formula"},{name:"Number",value:"Number"},{name:"Currency",value:"Currency"},{name:"Percent",value:"Percent"},{name:"Checkbox",value:"Checkbox"},{name:"Date",value:"Date"},{name:"DateTime",value:"DateTime"},{name:"Url",value:"Url"},{name:"Phone",value:"Phone"},{name:"Picklist",value:"Picklist"},{name:"Multiselect Picklist",value:"MultiselectPicklist"},{name:"Lookup",value:"Lookup"},{name:"Master Detail",value:"MasterDetail"}],placeholder:""},{name:"description",label:"Description",type:"textarea",show:"always",placeholder:"What is this field for?"},{name:"dataType",label:"Data Type",type:"select",selectType:"text",selectOptions:[{name:"Text",value:"Text"},{name:"Number",value:"Number"},{name:"Currency",value:"Currency"}],show:!1,showFor:"Formula",placeholder:""},{name:"length",label:"Length",type:"number",show:!1,validation:{},showFor:["Text","RichTextArea","LongTextArea"],placeholder:""},{name:"sfobject",label:"Object",type:"text",show:!1,showFor:["MasterDetail","Lookup"],hasTooltip:!0,tooltip:"Enter the API name of the object that you're creating the field on. If it's a custom object, exclude the \"__c\" <br><br> <b>Example:</b> My_Custom_Object",placeholder:"The object the field is being created on"},{name:"lookupObject",label:"Lookup",type:"text",show:!1,hasTooltip:!0,tooltip:"Enter the API name of the object that you'd like to create the lookup to",showFor:["MasterDetail","Lookup"],placeholder:"The lookup object"},{name:"formula",label:"Formula",type:"textarea",show:!1,showFor:"Formula",placeholder:""},{name:"picklistValues",label:"Picklist Values",type:"textarea",show:!1,showFor:["Picklist","MultiselectPicklist"],hasTooltip:!0,tooltip:"You can mark a value as the default by surraunding it in asterisks. <br><br><b>Example:</b> *Default Val*",placeholder:"List each item on a separate line"},{name:"visibleLines",label:"Visible Lines",type:"number",show:!1,validation:{},showFor:["RichTextArea","LongTextArea","MultiselectPicklist"],placeholder:""},{name:"required",label:"Required",type:"checkbox",show:!1,showForExcept:["MultiselectPicklist"],placeholder:""},{name:"defaultValueBoolish",label:"Default Value",type:"radio",options:["True","False"],show:!1,showFor:"Checkbox"}]}])}(window.fieldless);